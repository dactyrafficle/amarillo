<!DOCTYPE html>
<html>

<head>
 <meta charset='utf-8'>
 <meta name='viewport' content='width=device-width, initial-scale=1.0'>
 <link rel="icon" href="amarillo.png">


 <style>
  html, body {
   font-family: calibri;
  }
  .box {
   position: absolute;
   border: 1px solid #333;
  }
  #infobox {
   position: absolute;
   left: 75vh;
  }
 </style>
 
</head>


<div class='cell' id='container'></div>
<div class='cell' id='infobox'></div>

<script src='amarillo.js'></script>

<script>

let hue = 0;
let n = 0;
let m;

let big_groups = [];

let obj = fetch('data.json?x=' + Math.random()).then(r => r.json()).then(arr => {

 m = arr[0].subgroups.length;
 boxes = makeBoxes(0, 0, 70, 70, arr);
 
 let container = document.getElementById('container');
 let infobox = document.getElementById('infobox');
 
 let scale = 1;
 
 for (let i = 0; i < boxes.length; i++) {
 
   let div = document.createElement('div');
   div.classList.add('box');
   div.style.top = boxes[i].py*scale + 'vh';
   div.style.left = boxes[i].px*scale + 'vh';
   div.style.width = boxes[i].sw*scale + 'vh';
   div.style.height = boxes[i].sh*scale + 'vh';
   
   div.style.backgroundColor = "hsl(" + boxes[i].hue + "," + boxes[i].sat + "%," + boxes[i].lig + "%)";
   div.classList.add(boxes[i].parent);
   div.classList.add(boxes[i].group);
   
   if (boxes[i].isParent)  {
    div.classList.add("parent");
    div.id = boxes[i].group;
    big_groups.push(boxes[i].group);
   }
   
   div.addEventListener('mouseover', function() {
     console.log(boxes[i]);
     infobox.innerHTML = '<h4> Y1 to Y2 </h4>';
     infobox.innerHTML += '<p> parent : ' + boxes[i].parent + '</p>';
     infobox.innerHTML += '<p> group : ' + boxes[i].group + '</p>';
     infobox.innerHTML += '<p> value : ' + boxes[i].value + '</p>';
   })
   

   container.appendChild(div);
   
   
   
   
   
 }
 
 // now the divs are made
 // easy to do w a bit of js i guess
 
 for (let i = 0; i < big_groups.length; i++) {
 let divs = document.getElementsByClassName(big_groups[i]);

 
 for (let j = 0; j < divs.length; j++) {
 
   divs[j].addEventListener('mouseover', function() {
   
    for (let y = 0; y < divs.length; y++) {
      divs[y].style.filter = "brightness(0.8)";
    }
    this.style.filter = "brightness(0.7)";
   });
   divs[j].addEventListener('mouseleave', function() {
    for (let y = 0; y < divs.length; y++) {
      divs[y].style.filter = "none";
    }
   });
 }
 
}
 
 
});




</script>
</html>
